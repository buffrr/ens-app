var r=require("bech32"),e=require("crypto-addr-codec");function n(r,n){return function(o){var t;switch(o.readUInt8(0)){case 118:if(169!==o.readUInt8(1)||136!==o.readUInt8(o.length-2)||172!==o.readUInt8(o.length-1))throw Error("Unrecognised address format");return t=Buffer.concat([Buffer.from([r]),o.slice(3,3+o.readUInt8(2))]),e.bs58Encode(t);case 169:if(135!==o.readUInt8(o.length-1))throw Error("Unrecognised address format");return t=Buffer.concat([Buffer.from([n]),o.slice(2,2+o.readUInt8(1))]),e.bs58Encode(t);default:throw Error("Unrecognised address format")}}}function o(r,n){return function(o){var t=e.bs58Decode(o),c=t.readUInt8(0);if(r.includes(c))return Buffer.concat([Buffer.from([118,169,20]),t.slice(1),Buffer.from([136,172])]);if(n.includes(c))return Buffer.concat([Buffer.from([169,20]),t.slice(1),Buffer.from([135])]);throw Error("Unrecognised address format")}}var t=function(r,e,t,c){return{coinType:e,decoder:o(t,c),encoder:n(t[0],c[0]),name:r}};function c(e,o,t){var c=function(e){return function(n){var o=n.readUInt8(0);if(o>=81&&o<=96)o-=80;else if(0!==o)throw Error("Unrecognised address format");var t=[o].concat(r.toWords(n.slice(2,n.readUInt8(1)+2)));return r.encode(e,t)}}(e),f=n(o,t);return function(r){try{return f(r)}catch(e){return c(r)}}}function f(e,n,t){var c=function(e){return function(n){var o=r.decode(n),t=o.words;if(o.prefix!==e)throw Error("Unexpected human-readable part in bech32 encoded address");var c=r.fromWords(t.slice(1)),f=t[0];return f>0&&(f+=80),Buffer.concat([Buffer.from([f,c.length]),Buffer.from(c)])}}(e),f=o(n,t);return function(r){return r.toLowerCase().startsWith(e+"1")?c(r):f(r)}}var d=function(r,e,n,o,t){return{coinType:e,decoder:f(n,o,t),encoder:c(n,o[0],t[0]),name:r}};function a(r){return function(n){return e.toChecksumAddress(n.toString("hex"),r||null)}}function u(r){return function(n){var o=e.stripHexPrefix(n);if(!e.isValidChecksumAddress(n,r||null)&&o!==o.toLowerCase()&&o!==o.toUpperCase())throw Error("Invalid address checksum");return Buffer.from(e.stripHexPrefix(n),"hex")}}var s=function(r,e,n){return{coinType:e,decoder:u(n),encoder:a(n),name:r}};function i(e){return function(n){return r.encode(e,r.toWords(n))}}var m=function(e,n,o){return{coinType:n,decoder:(t=o,function(e){var n=r.decode(e),o=n.words;if(n.prefix!==t)throw Error("Unrecognised address format");return Buffer.from(r.fromWords(o))}),encoder:i(o),name:e};var t};function h(r){return new Buffer(e.ss58Decode(r))}var l=function(r,e,n,o){return{coinType:e,decoder:o,encoder:n,name:r}},B=[d("BTC",0,"bc",[0],[5]),d("LTC",2,"ltc",[48],[50,5]),t("DOGE",3,[30],[22]),t("DASH",5,[76],[16]),t("PPC",6,[55],[117]),d("MONA",22,"mona",[50],[55,5]),l("XEM",43,function(r){return e.b32encode(e.hex2a(r.toString("hex")))},function(r){if(!e.isValid(r))throw Error("Unrecognised address format");var n=r.toString().toUpperCase().replace(/-/g,"");return e.b32decode(n)}),s("ETH",60),s("ETC",61),m("ATOM",118,"cosmos"),m("ZIL",119,"zil"),s("RSK",137,30),l("XRP",144,function(r){return e.codec.encodeChecked(r)},function(r){return e.codec.decodeChecked(r)}),l("BCH",145,function(r){switch(r.readUInt8(0)){case 118:if(169!==r.readUInt8(1)||136!==r.readUInt8(r.length-2)||172!==r.readUInt8(r.length-1))throw Error("Unrecognised address format");return e.cashaddrEncode("bitcoincash",0,r.slice(3,3+r.readUInt8(2)));case 169:if(135!==r.readUInt8(r.length-1))throw Error("Unrecognised address format");return e.cashaddrEncode("bitcoincash",1,r.slice(2,2+r.readUInt8(1)));default:throw Error("Unrecognised address format")}},function(r){var n=o([0],[5]);try{return n(r)}catch(n){return function(r){var n=e.cashaddrDecode(r),o=n.type,t=n.hash;if(0===o)return Buffer.concat([Buffer.from([118,169,20]),Buffer.from(t),Buffer.from([136,172])]);if(1===o)return Buffer.concat([Buffer.from([169,20]),Buffer.from(t),Buffer.from([135])]);throw Error("Unrecognised address format")}(r)}}),l("XLM",148,function(r){return e.encodeCheck("ed25519PublicKey",r)},function(r){return e.decodeCheck("ed25519PublicKey",r)}),l("EOS",194,function(r){if(!e.eosPublicKey.isValid(r))throw Error("Unrecognised address format");return e.eosPublicKey.fromHex(r).toString()},function(r){if(!e.eosPublicKey.isValid(r))throw Error("Unrecognised address format");return e.eosPublicKey(r).toBuffer()}),l("TRX",195,e.bs58Encode,e.bs58Decode),l("NEO",239,e.bs58Encode,e.bs58Decode),l("DOT",354,function(r){return e.ss58Encode(Uint8Array.from(r),0)},h),l("SOL",501,e.bs58Encode,e.bs58Decode),l("KSM",434,function(r){return e.ss58Encode(Uint8Array.from(r),2)},h),s("XDAI",700),s("VET",703),m("BNB",714,"bnb"),{coinType:1729,decoder:function(r){var n=e.bs58Decode(r).slice(3);switch(r.substring(0,3)){case"tz1":return Buffer.concat([Buffer.from([0,0]),n]);case"tz2":return Buffer.concat([Buffer.from([0,1]),n]);case"tz3":return Buffer.concat([Buffer.from([0,2]),n]);case"KT1":return Buffer.concat([Buffer.from([1]),n,Buffer.from([0])]);default:throw Error("Unrecognised address format")}},encoder:function(r){if(22!==r.length&&21!==r.length)throw Error("Unrecognised address format");var n;switch(r.readUInt8(0)){case 0:if(0===r.readUInt8(1))n=Buffer.from([6,161,159]);else if(1===r.readUInt8(1))n=Buffer.from([6,161,161]);else{if(2!==r.readUInt8(1))throw Error("Unrecognised address format");n=Buffer.from([6,161,164])}return e.bs58Encode(Buffer.concat([n,r.slice(2)]));case 1:return n=Buffer.from([2,90,121]),e.bs58Encode(Buffer.concat([n,r.slice(1,21)]));default:throw Error("Unrecognised address format")}},name:"XTZ"},m("ADA",1815,"addr"),s("CELO",52752)],U=Object.assign.apply(Object,[{}].concat(B.map(function(r){var e;return(e={})[r.name]=r,e}))),E=Object.assign.apply(Object,[{}].concat(B.map(function(r){var e;return(e={})[r.coinType]=r,e})));exports.formatsByCoinType=E,exports.formatsByName=U;
//# sourceMappingURL=index.js.map
